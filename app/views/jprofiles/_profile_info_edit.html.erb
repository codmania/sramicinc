<br/>
<br/>
<%= form_for @jprofile, :html => { :multipart => true , :class => "form-horizontal jprofile" } do |f| %>


    <% if @jprofile.errors.any? %>

          <div class="panel-body">
            <ul>
              <% @jprofile.errors.full_messages.each_with_index  do |msg, index| %>
                  <% if index%2 != 0 %>
                      <li style="color:red;"> <%= msg = msg.split("Logo").last %></li>
                  <% end %>

              <% end %>
            </ul>
          </div>

    <% end %>


    <div class="profile-detail" id="edit_profile_window">
      <ul class="prof-details">

        <div class = "form-group pro_form_group">
          <label class = "col-sm-3 text-muted" for = "services">Title<em>*</em></label>
          <div class = "col-sm-4 pro_col_sm_4">
            <%= f.text_field :title,:class => "form-control",:required=>true,:maxlength => 100 %>
          </div>
        </div>



        <div class = "form-group pro_form_group">
          <label class = "col-sm-3 text-muted" for = "services">Name<em>*</em></label>
          <div class = "col-sm-4 pro_col_sm_4">
            <%= f.text_field :name,:class => "form-control",:required=>true,:maxlength => 60 %>
          </div>
        </div>

          <div class = "form-group pro_form_group">
          <label class = "col-sm-3 text-muted" for = "services">Address1<em>*</em></label>
          <div class = "col-sm-4 pro_col_sm_4">
            <%= f.text_field :address1,:class => "form-control",:required=>true, :maxlength => 1000%>
          </div>
        </div>

        <div class = "form-group pro_form_group">
          <label class = "col-sm-3 text-muted" for = "services">Address2:</label>
          <div class = "col-sm-4 pro_col_sm_4">
            <%= f.text_field :address2,:class => "form-control",:maxlength => 1000%>
          </div>
        </div>


        <div class = "form-group pro_form_group">
          <label class = "col-sm-3 text-muted" for = "services">Country:<em>*</em></label>
          <div class = "col-sm-4 pro_col_sm_4">
            <%= f.collection_select :country_list_id,CountryList.all,:id,:name,{:prompt => 'Select Country'},:required=>true %>
          </div>
        </div>

        <div class = "form-group pro_form_group">
          <label class = "col-sm-3 text-muted" for = "services">State<em>*</em></label>
          <div class = "col-sm-4 pro_col_sm_4">
            <input type="hidden" name="state_list_id" id="state_list_id" value="<%= @jprofile.state_list_id%>">
            <select id="jprofile_state_list_id" name="jprofile[state_list_id]" class="state_list" required="required">
            </select>
          </div>
        </div>

         <div class = "form-group pro_form_group">
          <label class = "col-sm-3 text-muted" for = "services">City<em>*</em></label>
          <div class = "col-sm-4 pro_col_sm_4">
            <%= f.text_field :city,:class => "form-control",:required=>true,:maxlength => 50 %>
          </div>
        </div>

        <div class = "form-group pro_form_group">
          <label class = "col-sm-3 text-muted" for = "services">Zip Code<em>*</em></label>
          <div class = "col-sm-4 pro_col_sm_4">
            <%= f.text_field :zip,:class => "form-control",:pattern=>"[0-9]{5}$",:required=>true,:title=>'Zip code Should be in digits and 5 digits' %>
          </div>
        </div>

        <div class = "form-group pro_form_group">
          <label class = "col-sm-3 text-muted" for = "services">Phone<em>*</em></label>
          <div class = "col-sm-4 pro_col_sm_4">
            <%= f.text_field :phone,:class => "form-control",:pattern=>"([\+]?[1]{1})?(?:[\(][0-9]{3}[\)]|[0-9]{3})[\-]?[0-9]{3}[\-]?[0-9]{4}",:title=>'Phone Number Format:Any 10 digit numbers, 123-456-7890 ,(123)456-7890,+11234567890',:required=>'true'%>
          </div>
        </div>





       <div class = "form-group pro_form_group">
          <label class = "col-sm-3 text-muted" for = "services">Salary Type:</label>
          <div class = "col-sm-4 pro_col_sm_4">

          <%= f.collection_select :salary_type_id, SalaryType.all, :id, :s_type %>
          </div>
        </div>

        <div class = "form-group pro_form_group">
          <label class = "col-sm-3 text-muted" for = "services">Salary:</label>
          <div class = "col-sm-4 pro_col_sm_4">
            <%= f.text_field :salary,:class => "form-control",:pattern => "[0-9]{1,10}(?:[\.]{1}[0-9]{1,3})?", :title => 'Salary max 10 digits before decimal, optional decimal, decimal max 3 digits',:maxlength=>14%>
          </div>
        </div>

        <div class = "form-group pro_form_group">
        <label class = "col-sm-3" for = "resume">Photo:</label>
        <div class = "col-sm-4 pro_col_sm_4">
          <%= f.file_field :logo,:class => "form-control" %>
        </div>
        </div>

        <div class = "form-group pro_form_group">
        <label class = "col-sm-3 text-muted" for = "services">Summary<em>*</em></label>
          <div class = "col-sm-4 pro_col_sm_4">
            <%= f.text_area :summary,:class => "form-control",:required=>true ,:maxlength=>1000 %>
            </div>
        </div>
        <h6 style="margin-left:29%">Maximum 1000 characters are allowed</h6>


        <div class = "form-group pro_form_group">
          <label class = "col-sm-3" for = "resume">Resume:</label>
          <div class = "col-sm-4 pro_col_sm_4">
            <%= f.file_field :resume,:class => "form-control" %>
          </div>
        </div>

          <div class="form-group pro_form_group">
            <div class="col-sm-offset-4 col-sm-10">
            <%= f.submit "Save" ,:class => "btn btn-primary" %>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                        jprofile_path, :class => 'btn btn-warning' %>
            </div>
          </div>

      </ul>
    </div>



<% end %>

<script>

    $(document).ready(function(){
        var selectedCountry = $("#jprofile_country_list_id option:selected").val();

        if(selectedCountry != ''){

            jQuery.ajax({

                url:'/country_lists/country_list_update?countryid='+selectedCountry,
                type:'POST',
                success:function(resp){
                    $(".state_list").html(resp);
                    $('#jprofile_state_list_id').val($('#state_list_id').val());
                }
            });
        }
        $('#jprofile_country_list_id').change(function(){
            var selectedCountry = $("#jprofile_country_list_id option:selected").val();

            jQuery.ajax({

                url:'/country_lists/country_list_update?countryid='+selectedCountry,
                type:'POST',
                success:function(resp){
                    $(".state_list").html(resp);
                }
            });
        });

    });


</script>
